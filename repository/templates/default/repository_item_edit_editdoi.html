<!--// ---------------------------------------------------------------------->
<!--//                                                                     -->
<!--// $Id: repository_item_edit_editdoi.html 53594 2015-05-28 05:25:53Z kaede_matsushita $          -->
<!--//                                                                     -->
<!--// Copyright (c) 2007 - 2008, National Institute of Informatics,        -->
<!--// Research and Development Center for Scientific Information Resources -->
<!--//                                                                     -->
<!--// This program is licensed under a Creative Commons BSD Licence       -->
<!--// http://creativecommons.org/licenses/BSD/                            -->
<!--//                                                                     -->
<!--// ---------------------------------------------------------------------->
<div class="mt10">
	<div>
		<table align="center">
			<{* HELP *}>
			<{if $smarty.session._lang=="japanese" && $action.help_icon_display == "1"}>
				<tr>
					<td align="right" class="ptb10">
						<a href="#" onclick="repositoryCls['<{$id}>'].repositoryHelp(event,'edit_doi');return false;" style="cursor: help;">
							<img src="<{$smarty.const.CORE_BASE_URL}>/images/repository/default/help.png" align="right" alt="help">
						</a>
					</td>
				</tr>
			<{/if}>
			
			<{* FLOW *}>
			<tr>
				<td align="center">
                    <{if $smarty.session._lang == "japanese"}>
                        <{if $smarty.session.attr_file_flg == 1}>
                            <img id="fileImg<{$id}>_JPN_DOI" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_5.png" />
                        <{else}>
                            <img id="fileImg<{$id}>_JPN_NO_DOI" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_4.png" />
                        <{/if}>
                    <{else}>
                        <{if $smarty.session.attr_file_flg == 1}>
                            <img id="fileImg<{$id}>_ENG_DOI" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_5_eng.png" />
                        <{else}>
                            <img id="fileImg<{$id}>_ENG_NO_DOI" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_4_eng.png" />
                        <{/if}>
                    <{/if}>
                    <map name="flowImgMap<{$id}>_doi">
                        <{if $smarty.session.edit_flag != 1}>
                            <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">
                        <{/if}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('files'); return false;" title="<{$lang.repository_item_editfiles}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,552,37,560,19,560,18,552,0">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('doi'); return false;" title="<{$lang.repository_item_add_doi}>" style="cursor: pointer;" shape="poly" coords="552,0,560,18,560,19,552,37,692,37,700,19,700,18,692,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="692,0,700,18,700,19,692,37,841,37,841,0">
                    </map>
                    <map name="flowImgMap<{$id}>_no_doi">
                        <{if $smarty.session.edit_flag != 1}>
                            <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">
                        <{/if}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('doi'); return false;" title="<{$lang.repository_item_add_doi}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,552,37,560,19,560,18,552,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="552,0,560,18,560,19,552,37,701,37,701,0">
                    </map>
				</td>
			</tr>
		</table>
	</div>

	<div class="mt10" align=center>
		<input type="button" class="btn_back" value="<{$lang.repository_return}>" onclick="commonCls.sendView('<{$id}>','repository_view_main_item_editlinks'); return false;">
		<input type="button" class="btn_blue" value="<{$lang.repository_save}>" onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('stay');return false;" />
		<input type="button" class="btn_next" value="<{$lang.repository_page_next}>" onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('next');return false;" />
	</div>
    <center>
        <{if $action.errMsg != null && count($action.errMsg) > 0}>
        <div class="error_msg al">
            <{foreach from=$action.errMsg item=msg}>
            <{$msg|smarty:nodefaults}><br/>
            <{/foreach}>
        </div>
        <{/if}>
        <{if $action.warningMsg != null && count($action.warningMsg) > 0}>
        <div class="warning_msg al">
            <{foreach from=$action.warningMsg item=msg}>
            <{$msg|smarty:nodefaults}><br/>
            <{/foreach}>
        </div>
        <{/if}>
    </center>

 <div align="center" class="text_color">
  <form>
   <div class="paging">
    <{if $action.doi_status == '0' && $action.displays_doi_grant == true}>
      <table>
        <tbody>
        <{if strlen($action.prefix_jalcdoi) > 0 && $smarty.const._REPOSITORY_JALC_DOI == true}>
          <tr>
            <td  style="padding-top : 10px; padding-left : 5px">
              <input type="checkbox" id="id_entry_jalcdoi_checkbox" name="entry_jalcdoi_checkbox" value="<{$action.suffix}>" align="center" onclick="javascript: changeJalcdoiCheckbox();" >
            </td>
            <td  style="padding-top : 10px; padding-left : 5px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_jalcdoi_checkbox">
                <{$lang.repository_item_enter_jalcdoi}>
              </label>
            </td>
            <td  style="padding-top : 10px; padding-left : 10px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_jalcdoi_checkbox">
                http://doi.org/<{$action.prefix_jalcdoi}>/<{if $action.prefix_flag > 0}><{$action.prefix_yhandle}>.<{/if}><{$action.suffix}>
              </label>
              <input type="hidden" id="id_entry_jalcdoi_hidden" name="entry_jalcdoi_hidden" value="http://doi.org/<{$action.prefix_jalcdoi}>/<{$action.suffix}>">
            </td>
          </tr>
        <{/if}>
        <{if strlen($action.prefix_crossref) > 0 && $smarty.const._REPOSITORY_JALC_CROSSREF_DOI == true}>
          <tr>
            <td  style="padding-top : 10px; padding-left : 5px">
              <input type="checkbox" id="id_entry_crossref_checkbox" name="entry_crossref_checkbox" value="<{$action.suffix}>" align="center" onclick="javascript: changeCrossrefCheckbox();" >
            </td>
            <td  style="padding-top : 10px; padding-left : 5px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_crossref_checkbox">
                <{$lang.repository_item_enter_crossref}>
              </label>
            </td>
            <td  style="padding-top : 10px; padding-left : 10px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_crossref_checkbox">
                http://doi.org/<{$action.prefix_crossref}>/<{if $action.prefix_flag > 0}><{$action.prefix_yhandle}>.<{/if}><{$action.suffix}>
              </label>
              <input type="hidden" id="id_entry_crossref_hidden" name="entry_crossref_hidden" value="http://doi.org/<{$action.prefix_crossref}>/<{$action.suffix}>">
            </td>
          </tr>
        <{/if}>
        <{if strlen($action.prefix_datacite) > 0 && $smarty.const._REPOSITORY_JALC_DATACITE_DOI == true}>
          <tr>
            <td  style="padding-top : 10px; padding-left : 5px">
              <input type="checkbox" id="id_entry_datacite_checkbox" name="entry_datacite_checkbox" value="<{$action.suffix}>" align="center" onclick="javascript: changeDataciteCheckbox();" >
            </td>
            <td  style="padding-top : 10px; padding-left : 5px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_datacite_checkbox">
                <{$lang.repository_item_enter_datacite}>
              </label>
            </td>
            <td  style="padding-top : 10px; padding-left : 10px">
              <label style="display: block; width:100%;height:100%;" for="id_entry_datacite_checkbox">
                http://doi.org/<{$action.prefix_datacite}>/<{if $action.prefix_flag > 0}><{$action.prefix_yhandle}>.<{/if}><{$action.suffix}>
              </label>
              <input type="hidden" id="id_entry_datacite_hidden" name="entry_datacite_hidden" value="http://doi.org/<{$action.prefix_datacite}>/<{$action.suffix}>">
            </td>
          </tr>
        <{/if}>
        </tbody>
      </table>
     <{if strlen($action.prefix_library_jalcdoi) > 0}>
      <div class="paging" style="margin-left:33%" align="left">
        <{$lang.repository_item_enter_library_jalcdoi}></br>
        <input type="text" id="id_entry_library_jalcdoi_text" name="entry_library_jalcdoi_text" align="center" onfocus="javascript: focusLibraryJalcdoiText()" ><label for="id_entry_library_jalcdoi_text"></label>
        <input type="hidden" id="id_entry_library_jalcdoi_hidden" name="entry_library_jalcdoi_hidden" value="http://doi.org/<{$action.prefix_library_jalcdoi}>/<{$action.suffix}>">
      </div>
     <{/if}>
    <{elseif $action.doi_status == '1'}>
     <div class="paging">
       <input type="button" class="btn_delete_doi ar" align="center" value="<{if $action.registed_library_jalcdoi == 1}><{$lang.repository_item_delete_library_jalcdoi}><{elseif $action.registed_doi == 1}><{$lang.repository_item_delete_jalcdoi}><{elseif $action.registed_doi == 2}><{$lang.repository_item_delete_crossref}><{else}><{$lang.repository_item_delete_datacite}><{/if}>" onclick="if(!commonCls.confirm('<{$lang.repository_item_delete_jalcdoi_confirm}>'))return false; commonCls.sendView('<{$id}>', {'action':'repository_view_main_item_editdoi', 'drop_doi':'true'}); return false;">
     </div>
    <{elseif $action.doi_status == '2'}>
     <div class="paging">
       <span><{$lang.repository_item_doi_droped}></span>
     </div>
    <{/if}>
   </div>
  </form>

  <input type="button" class="btn_back" value="<{$lang.repository_return}>" onclick="commonCls.sendView('<{$id}>', 'repository_view_main_item_editlinks');return false;">
  <input type="button" class="btn_blue" value="<{$lang.repository_save}>" onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('stay');return false;" />
  <input type="button" class="btn_next" value="<{$lang.repository_page_next}>" onclick="repositoryCls['<{$id}>'].repositoryItemEditDoi('next');return false;" />
 </div>

</div>

<script class="nc_script" type="text/javascript">
    changeJalcdoiCheckbox = function()
    {
        if($(id_entry_jalcdoi_checkbox).checked == true)
        {
            var checkCrossRef = document.getElementById("id_entry_crossref_checkbox");
            
            if (checkCrossRef)
            {
                $(id_entry_crossref_checkbox).checked = false;
            }
            
            var checkDataCite = document.getElementById("id_entry_datacite_checkbox");
            
            if (checkDataCite)
            {
                $(id_entry_datacite_checkbox).checked = false;
            }
            
            var textLibraryJalcdoi = document.getElementById("id_entry_library_jalcdoi_text");
            
            if (textLibraryJalcdoi)
            {
                $(id_entry_library_jalcdoi_text).value = "";
            }
        }
        
        return false;
    }
</script>
<script class="nc_script" type="text/javascript">
    changeCrossrefCheckbox = function()
    {
        if($(id_entry_crossref_checkbox).checked == true)
        {
            var checkJalcdoi = document.getElementById("id_entry_jalcdoi_checkbox");
            
            if (checkJalcdoi)
            {
                $(id_entry_jalcdoi_checkbox).checked = false;
            }
            
            var checkDataCite = document.getElementById("id_entry_datacite_checkbox");
            
            if (checkDataCite)
            {
                $(id_entry_datacite_checkbox).checked = false;
            }
            
            var textLibraryJalcdoi = document.getElementById("id_entry_library_jalcdoi_text");
            
            if (textLibraryJalcdoi)
            {
                $(id_entry_library_jalcdoi_text).value = "";
            }
        }
        
        return false;
    }
</script>
<script class="nc_script" type="text/javascript">
    changeDataciteCheckbox = function()
    {
        if($(id_entry_datacite_checkbox).checked == true)
        {
            var checkJalcdoi = document.getElementById("id_entry_jalcdoi_checkbox");
            
            if (checkJalcdoi)
            {
                $(id_entry_jalcdoi_checkbox).checked = false;
            }
            
            var checkCrossRef = document.getElementById("id_entry_crossref_checkbox");
            
            if (checkCrossRef)
            {
                $(id_entry_crossref_checkbox).checked = false;
            }
            
            var textLibraryJalcdoi = document.getElementById("id_entry_library_jalcdoi_text");
            
            if (textLibraryJalcdoi)
            {
                $(id_entry_library_jalcdoi_text).value = "";
            }
        }
        
        return false;
    }
</script>
<script class="nc_script" type="text/javascript">
    focusLibraryJalcdoiText = function()
    {
        var checkJalcdoi = document.getElementById("id_entry_jalcdoi_checkbox");
            
        if (checkJalcdoi)
        {
            $(id_entry_jalcdoi_checkbox).checked = false;
        }
        
        var checkCrossRef = document.getElementById("id_entry_crossref_checkbox");
            
        if (checkCrossRef)
        {
            $(id_entry_crossref_checkbox).checked = false;
        }
        
        var checkDataCite = document.getElementById("id_entry_datacite_checkbox");
        
        if (checkDataCite)
        {
            $(id_entry_datacite_checkbox).checked = false;
        }
        
        return false;
    }
</script>
<{include file="repository_script.html"}>