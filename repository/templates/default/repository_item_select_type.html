<!--// ---------------------------------------------------------------------->
<!--//                                                                     -->
<!--// $Id: repository_item_select_type.html 53594 2015-05-28 05:25:53Z kaede_matsushita $          -->
<!--//                                                                     -->
<!--// Copyright (c) 2007 - 2008, National Institute of Informatics,        -->
<!--// Research and Development Center for Scientific Information Resources -->
<!--//                                                                     -->
<!--// This program is licensed under a Creative Commons BSD Licence       -->
<!--// http://creativecommons.org/licenses/BSD/                            -->
<!--//                                                                     -->
<!--// ---------------------------------------------------------------------->

<div class="mt10">
	<div>
		<table align="center">
			<{* HELP *}>
			<{if $smarty.session._lang=="japanese" && $action.help_icon_display == "1"}>
				<tr>
					<td align="right" class="ptb10">
						<a href="#" onclick="repositoryCls['<{$id}>'].repositoryHelp(event,'select_itemtype'); return false;" style="cursor: help;">
							<img src="<{$smarty.const.CORE_BASE_URL}>/images/repository/default/help.png" align="right" alt="help">
						</a>
					</td>
				</tr>
			<{/if}>
			
			<{* FLOW *}>
			<tr>
				<td align="center">
                    <{if $smarty.session._lang == "japanese"}>
                        <{if $action.itemtype_file[0]=="0" &&  $action.itemtype_data[0][2]=="1"}>
                            <img id="fileImg<{$id}>_JPN" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1.png" />
                            <img id="fileImg<{$id}>_JPN_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO_DOI" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1.png" />
                        <{elseif $action.itemtype_file[0]=="0"}>
                            <img id="fileImg<{$id}>_JPN" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1.png" />
                            <img id="fileImg<{$id}>_JPN_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1.png" />
                        <{elseif $action.itemtype_data[0][2]=="1"}>
                            <img id="fileImg<{$id}>_JPN" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1.png" />
                            <img id="fileImg<{$id}>_JPN_DOI" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1.png" />
                        <{else}>
                            <img id="fileImg<{$id}>_JPN" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1.png" />
                            <img id="fileImg<{$id}>_JPN_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1.png" />
                            <img id="fileImg<{$id}>_JPN_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1.png" />
                        <{/if}>
                    <{else}>
                        <{if $action.itemtype_file[0]=="0" && $action.itemtype_data[0][2]=="1"}>
                            <img id="fileImg<{$id}>_ENG" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO_DOI" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1_eng.png" />
                        <{elseif $action.itemtype_file[0]=="0"}>
                            <img id="fileImg<{$id}>_ENG" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1_eng.png" />
                        <{elseif $action.itemtype_data[0][2]=="1"}>
                            <img id="fileImg<{$id}>_ENG" style="display:none" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_DOI" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1_eng.png" />
                        <{else}>
                            <img id="fileImg<{$id}>_ENG" usemap="#flowImgMap<{$id}>" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_DOI" style="display:none" usemap="#flowImgMap<{$id}>_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_doi_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO" style="display:none" usemap="#flowImgMap<{$id}>_no" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_1_eng.png" />
                            <img id="fileImg<{$id}>_ENG_NO_DOI" style="display:none" usemap="#flowImgMap<{$id}>_no_doi" src="<{$smarty.const.CORE_BASE_URL}>/images/repository/<{$action.wekoThemeName}>/item_select_type_no_file_doi_1_eng.png" />
                        <{/if}>
                    <{/if}>
                    <map name="flowImgMap<{$id}>">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('files'); return false;" title="<{$lang.repository_item_editfiles}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,552,37,560,19,560,18,552,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="552,0,560,18,560,19,552,37,701,37,701,0">
                    </map>
                    <map name="flowImgMap<{$id}>_doi">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('files'); return false;" title="<{$lang.repository_item_editfiles}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,552,37,560,19,560,18,552,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('doi'); return false;" title="<{$lang.repository_item_add_doi}>" style="cursor: pointer;" shape="poly" coords="552,0,560,18,560,19,552,37,692,37,700,19,700,18,692,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="692,0,700,18,700,19,692,37,841,37,841,0">
                    </map>
                    <map name="flowImgMap<{$id}>_no">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,561,37,561,0">
                    </map>
                    <map name="flowImgMap<{$id}>_no_doi">
                        <{*<area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('selecttype'); return false;" title="<{$lang.repository_item_selecttype}>" style="cursor: pointer;" shape="poly" coords="0,0,0,37,132,37,140,19,140,18,132,0">*}>
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('texts'); return false;" title="<{$lang.repository_item_edittexts}>" style="cursor: pointer;" shape="poly" coords="132,0,140,18,140,19,132,37,272,37,280,19,280,18,272,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('links'); return false;" title="<{$lang.repository_item_editlinks}>" style="cursor: pointer;" shape="poly" coords="272,0,280,18,280,19,272,37,412,37,420,19,420,18,412,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('doi'); return false;" title="<{$lang.repository_item_add_doi}>" style="cursor: pointer;" shape="poly" coords="412,0,420,18,420,19,412,37,552,37,560,19,560,18,552,0">
                        <area onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('confirm'); return false;" title="<{$lang.repository_item_confirm}>" style="cursor: pointer;" shape="poly" coords="552,0,560,18,560,19,552,37,701,37,701,0">
                    </map>
				</td>
			</tr>
		</table>
	</div>
	
<div align="center" class="text_color">
    <{if $action.errMsg != null && count($action.errMsg) > 0}>
    <div class="error_msg al">
        <{foreach from=$action.errMsg item=msg}>
        <{$msg|smarty:nodefaults}><br/>
        <{/foreach}>
    </div>
    <{/if}>
    <{if $action.warningMsg != null && count($action.warningMsg) > 0}>
    <div class="warning_msg al">
        <{foreach from=$action.warningMsg item=msg}>
        <{$msg|smarty:nodefaults}><br/>
        <{/foreach}>
    </div>
    <{/if}>

  <div class="paging">
    <{$lang.repository_item_msg_selecttype}>
  </div>

  <div>
   <form id="id_item_type_select" method="post">
     <select class="w30" name="itemtype_id" size="1" onChange="javascript: editInsFlow(this.selectedIndex)">
     <!-- アイテムタイプ一覧をスクリプトで登録。valueは主キー, 表示はアイテムタイプ名 -->
     <{foreach from=$action.itemtype_data item=item_type}>
       <option value="<{$item_type[0]}>" <{if $smarty.session.item_type_all.item_type_name == $item_type[1]}>SELECTED<{/if}>><{$item_type[1]}></option>
     <{/foreach}>
     </select>
   </form>
  </div>
</div>

<{if $action.itemtype_data|@count > 0}>
 <div align=center class="paging">
   <form onsubmit="return false;">
	<input type="button" class="btn_next" value="<{$lang.repository_page_next}>" onclick="repositoryCls['<{$id}>'].repositoryItemSelectType('next'); return false;" />
   </form>
 </div>
<{/if}>

</div>

<{include file="repository_script.html"}>

<script class="nc_script" type="text/javascript">
    editInsFlow = function( idx ) {
    attrfile = new Array();
    doigrant = new Array();

    <{foreach from=$action.itemtype_file item=attr_file}>
       attrfile.push(<{$attr_file}>);
    <{/foreach}>
    <{foreach from=$action.itemtype_data item=type_data}>
       doigrant.push(<{$type_data[2]}>);
    <{/foreach}>
    
    imgFlowFile = new Object();
    imgFlowFileNo = new Object();
    imgFlowDoi = new Object();
    imgFlowFileNoDoi = new Object();
    <{if $smarty.session._lang == "japanese"}>
        imgFlowFile = $('fileImg<{$id}>_JPN');
        imgFlowFileNo = $('fileImg<{$id}>_JPN_NO');
        imgFlowDoi = $('fileImg<{$id}>_JPN_DOI');
        imgFlowFileNoDoi = $('fileImg<{$id}>_JPN_NO_DOI');
    <{else}>
        imgFlowFile = $('fileImg<{$id}>_ENG');
        imgFlowFileNo = $('fileImg<{$id}>_ENG_NO');
        imgFlowDoi = $('fileImg<{$id}>_ENG_DOI');
        imgFlowFileNoDoi = $('fileImg<{$id}>_ENG_NO_DOI');
    <{/if}>
    
    if( attrfile[idx] != "1" && doigrant[idx] == "1")
    {
        imgFlowFile.style.display = "none";
        imgFlowFileNo.style.display = "none";
        imgFlowDoi.style.display = "none";
        imgFlowFileNoDoi.style.display = "";
    }
    else if( attrfile[idx] != "1" )
    {
        imgFlowFile.style.display = "none";
        imgFlowFileNo.style.display = "";
        imgFlowDoi.style.display = "none";
        imgFlowFileNoDoi.style.display = "none";
    }
    else if( doigrant[idx] == "1" )
    {
        imgFlowFile.style.display = "none";
        imgFlowFileNo.style.display = "none";
        imgFlowDoi.style.display = "";
        imgFlowFileNoDoi.style.display = "none";
    }
    else
    {
        imgFlowFile.style.display = "";
        imgFlowFileNo.style.display = "none";
        imgFlowDoi.style.display = "none";
        imgFlowFileNoDoi.style.display = "none";
    }
  }
</script>

